import{u as W,_ as X,V as Y,a as P,b as z,c as h,d as J,e as K}from"./VLayout-G6-J8OKT.js";import{u as Z,c as ee,a as $,_ as te,b as se}from"./act.schema-BLbtq7_6.js";import{p as j,h as w,g as ae,q as le,t as A,e as oe,U as ne,c as a,b as u,n as B,a as N,A as I,d as ie,m as re,V as de,B as S,r as F,o as ue,w as ce,Q as k,F as v,C as R,W as me,R as d,D as r,G as y,X as x,P as fe,Y as pe,S as ye}from"./index-C7k9QDZv.js";import{x as ve,y as be,z as _e,k as xe,e as Ve,A as ke,B as ge,f as Se,C as Te,D as we,E as Ce,g as L,j as g,F as De,m as Pe,a as ze,G as he,H as $e,b as Ae,l as Be,I as Ne}from"./scopeId-CAbM3nmq.js";import{V as Ie}from"./VDataTable-BJXX6tMC.js";const Le=ve("v-alert-title"),je=j({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function Fe(e,o){return{iconSize:w(()=>{const s=new Map(e.iconSizes),i=e.iconSize??o()??"default";return s.has(i)?s.get(i):i})}}const Re=["success","info","warning","error"],Ue=j({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:de,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Re.includes(e)},...re(),...Ne(),...Be(),...Ae(),...je(),...$e(),...he(),...ze(),...Pe(),...ie(),...De({variant:"flat"})},"VAlert"),Me=ae()({name:"VAlert",props:Ue(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,o){let{emit:f,slots:s}=o;const i=le(e,"modelValue"),m=A(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:p}=Fe(e,()=>e.prominent?44:void 0),{themeClasses:l}=oe(e),{colorClasses:b,colorStyles:V,variantClasses:_}=be(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:t}=_e(e),{dimensionStyles:n}=xe(e),{elevationClasses:c}=Ve(e),{locationStyles:U}=ke(e),{positionClasses:M}=ge(e),{roundedClasses:E}=Se(e),{textColorClasses:G,textColorStyles:O}=Te(()=>e.borderColor),{t:q}=ne(),C=A(()=>({"aria-label":q(e.closeLabel),onClick(T){i.value=!1,f("click:close",T)}}));return()=>{const T=!!(s.prepend||m.value),H=!!(s.title||e.title),Q=!!(s.close||e.closable),D={density:e.density,icon:m.value,size:e.iconSize||e.prominent?p.value:void 0};return i.value&&a(e.tag,{class:N(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},l.value,b.value,t.value,c.value,M.value,E.value,_.value,e.class]),style:B([V.value,n.value,U.value,e.style]),role:"alert"},{default:()=>[we(!1,"v-alert"),e.border&&u("div",{key:"border",class:N(["v-alert__border",G.value]),style:B(O.value)},null),T&&u("div",{key:"prepend",class:"v-alert__prepend"},[s.prepend?a(L,{key:"prepend-defaults",disabled:!m.value,defaults:{VIcon:{...D}}},s.prepend):a(Ce,I({key:"prepend-icon"},D),null)]),u("div",{class:"v-alert__content"},[H&&a(Le,{key:"title"},{default:()=>[s.title?.()??e.title]}),s.text?.()??e.text,s.default?.()]),s.append&&u("div",{key:"append",class:"v-alert__append"},[s.append()]),Q&&u("div",{key:"close",class:"v-alert__close"},[s.close?a(L,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[s.close?.({props:C.value})]}):a(g,I({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},C.value),null)])]})}}}),Ee={class:"pa-4"},Ge={class:"d-flex align-content-space mb-4"},Oe={class:"pl-5 mb-4"},qe=S({__name:"ActList",props:{filters:{}},setup(e){const o=e,{user:f,commission:s,commissionMembers:i}=W(),m=w(()=>{const t=[];return f.familyName||t.push("Не визначено користувача системи"),s.title||t.push("Не зазначено інформацюі про комісію"),i.length===0&&t.push("Не внесено жодного члена комісії"),t}),p=[{key:"id",title:""},{key:"date",title:"Дата"},{key:"number",title:"Номер"},{key:"estateType",title:"Тип"},{key:"title",title:"Назва"},{key:"conclusionType",title:"Висновок"},{key:"signature",title:"Підпис"}],l=F([]),b=async()=>{const{acts:t}=Z();if(!o.filters){l.value=await t.toArray();return}l.value=await t.filter(n=>!(o.filters.conclusionType&&o.filters.conclusionType!==n.conclusionType||o.filters.estateType&&o.filters.estateType!==n.estateType||o.filters.minDate&&new Date(o.filters.minDate)>new Date(n.date)||o.filters.maxDate&&new Date(o.filters.maxDate)<new Date(n.date))).toArray()};ue(async()=>{await b()});const V=t=>t.cadastreNumber?t.cadastreNumber:[[t.address.admin4,`(${t.address.code4})`].join(" "),[t.address.streetType,t.address.streetName].filter(Boolean).join(" "),t.address.building,(t.address.block?["корпус",t.address.block]:[]).join(" "),(t.address.apartmentNumber?["кв.",t.address.apartmentNumber]:[]).join(" ")].join(", "),_=t=>{if(!t)return"";const n=ee.find(c=>c.value===t);if(n)return n.title};return ce(()=>o.filters,()=>{b()},{deep:!0}),(t,n)=>(v(),k("div",Ee,[u("div",Ge,[n[1]||(n[1]=u("h5",{class:"text-h5 w-100"},"Акти комісії",-1)),a(g,{to:"/acts/new",disabled:d(m).length>0,"prepend-icon":"mdi-plus",color:"primary-darken-1"},{default:r(()=>[...n[0]||(n[0]=[y("Створити",-1)])]),_:1},8,["disabled"])]),a(Ie,{headers:p,items:d(l),"hide-actions":"",class:"elevation-1","item-key":"id","hide-default-footer":"","items-per-page":0,"no-data-text":"Ви ще не додали жодного акта"},{"item.id":r(({item:c})=>[a(g,{to:`/acts/${c.id}`,fab:"",icon:"mdi-pencil",size:"x-small",color:"primary-darken-1"},null,8,["to"])]),"item.date":r(({item:c})=>[y(x(new Date(c.date).toLocaleString("uk").substring(0,10)),1)]),"item.title":r(({item:c})=>[y(x(V(c)),1)]),"item.conclusionType":r(({item:c})=>[y(x(_(c.conclusionType)),1)]),_:2},1032,["items"]),d(m).length>0?(v(),R(Me,{key:0,class:"mt-6",color:"primary-darken-2",variant:"outlined"},{default:r(()=>[n[3]||(n[3]=u("p",{class:"mb-4"},"Для початку користування системою, вам необхідно вирішити насутпні проблеми",-1)),u("ul",Oe,[(v(!0),k(fe,null,pe(d(m),c=>(v(),k("li",{key:c},x(c),1))),128))]),n[4]||(n[4]=u("p",null,'Для налашутвання системи, натисніть кнопку "Налаштувати"',-1)),a(g,{to:"/admin",class:"mt-6",variant:"flat",color:"primary-darken-1"},{default:r(()=>[...n[2]||(n[2]=[y("Налаштувати",-1)])]),_:1})]),_:1})):me("",!0)]))}}),He={class:"pa-4"},Qe={class:"font-weight-bold mb-1 text-subtitle-2"},We={class:"font-weight-bold mb-1 text-subtitle-2"},Xe=S({__name:"ActFilters",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:o}){const f=e,s=o,i=w({get:()=>f.modelValue,set:p=>s("update:modelValue",p)}),m=()=>{i.value={}};return(p,l)=>{const b=X,V=te,_=se;return v(),k("div",He,[l[5]||(l[5]=u("h5",{class:"text-h5 mb-4"},"Акти обстеження нерухомого майна",-1)),l[6]||(l[6]=u("p",{class:"text-subtitle-1 mb-6"},"Ви можете встановити додаткові фільтри для пошуку актів",-1)),u("div",Qe,x(d($).properties.estateType.title),1),a(b,{modelValue:d(i).estateType,"onUpdate:modelValue":l[0]||(l[0]=t=>d(i).estateType=t),dictionary:"estateTypes"},null,8,["modelValue"]),u("div",We,x(d($).properties.conclusionType.title),1),a(V,{modelValue:d(i).conclusionType,"onUpdate:modelValue":l[1]||(l[1]=t=>d(i).conclusionType=t)},null,8,["modelValue"]),l[7]||(l[7]=u("div",{class:"font-weight-bold mb-1 text-subtitle-2"},"Мінімальна дата прийтяття акту",-1)),a(_,{modelValue:d(i).minDate,"onUpdate:modelValue":l[2]||(l[2]=t=>d(i).minDate=t),max:new Date},null,8,["modelValue","max"]),l[8]||(l[8]=u("div",{class:"font-weight-bold mb-1 text-subtitle-2"},"Максимальна дата прийтяття акту",-1)),a(_,{modelValue:d(i).maxDate,"onUpdate:modelValue":l[3]||(l[3]=t=>d(i).maxDate=t),max:new Date},null,8,["modelValue","max"]),a(g,{onClick:m,сlass:"mt-4",color:"primary-darken-1"},{default:r(()=>[...l[4]||(l[4]=[y("Скинути всі",-1)])]),_:1})])}}}),Ye={style:{height:"calc(100vh - 56px)"}},Je=S({__name:"SearchPanel",setup(e){const o=F({});return(f,s)=>{const i=Xe,m=qe;return v(),k("div",Ye,[a(K,{class:"rounded-md pa-3 h-100"},{default:r(()=>[a(Y,null,{default:r(()=>[a(P,{cols:"4",class:"d-flex h-100 pa-5"},{default:r(()=>[a(z,{color:"main",class:"d-flex flex-column h-100 w-100"},{default:r(()=>[a(h,{class:"flex-grow-1 overflow-auto custom-scroll"},{default:r(()=>[a(J,{items:["Акти"]},{divider:r(()=>[...s[1]||(s[1]=[y("|",-1)])]),_:1}),a(i,{modelValue:d(o),"onUpdate:modelValue":s[0]||(s[0]=p=>ye(o)?o.value=p:null)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(P,{cols:"8",class:"d-flex h-100 pa-0"},{default:r(()=>[a(z,{class:"d-flex flex-column h-100 w-100 bg-white",flat:""},{default:r(()=>[a(h,{class:"flex-grow-1 overflow-auto pa-5"},{default:r(()=>[a(m,{filters:d(o)},null,8,["filters"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),at=S({__name:"index",setup(e){return(o,f)=>{const s=Je;return v(),R(s)}}});export{at as default};
