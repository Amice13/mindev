import{u as M,b as $,h as S,c as U,j as k,k as w,_ as h,i as z,J as A,V as E,a as j,d as I,e as G}from"./VLayout-D8S5asPj.js";import{a as J,V as Q,v as W,b as X,c as Z,_ as F}from"./OrganizationForm.vue_vue_type_script_setup_true_lang-DabB4OkJ.js";import{j as g,E as q}from"./scopeId-B-iGpsPC.js";import{B,h as H,r as y,C as T,F as b,D as a,c as t,G as p,b as u,X as V,R as o,S as N,Z as L,av as K,Q as D,W as O,al as P,L as Y,w as ee}from"./index-DP1l1KzP.js";import{V as te}from"./VDataTable-_68iDqez.js";const ae={class:"font-weight-bold mb-1 text-subtitle-2"},le={class:"font-weight-bold mb-1 text-subtitle-2"},se={class:"font-weight-bold mb-1 text-subtitle-2"},oe={class:"font-weight-bold mb-1 text-subtitle-2"},ne=B({__name:"CommissionMemberDialog",props:{id:{}},emits:["cancel"],setup(x,{emit:l}){const{addCommisionMember:d,saveUser:m,commissionMembers:C}=M(),v=x,n=H(()=>v.id!==void 0),s=y({}),c=y(!1),f=l,i=()=>{if(!s.value.familyName)return alert("Не зазначене прізвище члена комісії");if(!s.value.givenName)return alert("Не зазначене ім'я члена комісії");if(!s.value.additionalName)return alert("Не зазначене по батькові члена комісії");if(!s.value.status)return alert("Не зазначений статус члена комісії");if(s.value.status!=="Член комісії"&&C.filter(e=>e.status===s.value.status).length)return alert(s.value.status+" вже наявний у вашій комісії");const _=L(s.value);v.id&&(_.id=v.id,c.value&&m(_),d(_),s.value={},f("cancel"))};return(_,e)=>{const R=h;return b(),T(Q,{modelValue:o(n),"onUpdate:modelValue":e[6]||(e[6]=r=>N(n)?n.value=r:null),scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},{default:a(()=>[t($,{color:"main"},{default:a(()=>[t(S,{"primary-title":""},{default:a(()=>[...e[7]||(e[7]=[p(" Додати члена комісії ",-1)])]),_:1}),t(U,null,{default:a(()=>[e[8]||(e[8]=u("p",{class:"text-subtitle-1 mb-6"},"Зазначте прізвище, ім'я та по батькові особи",-1)),u("div",ae,V(o(k).properties.familyName.title),1),t(w,{modelValue:o(s).familyName,"onUpdate:modelValue":e[0]||(e[0]=r=>o(s).familyName=r),placeholder:"Дія",variant:"solo-inverted",name:"person.familyName"},null,8,["modelValue"]),u("div",le,V(o(k).properties.givenName.title),1),t(w,{modelValue:o(s).givenName,"onUpdate:modelValue":e[1]||(e[1]=r=>o(s).givenName=r),placeholder:"Надія",variant:"solo-inverted",name:"person.givenName"},null,8,["modelValue"]),u("div",se,V(o(k).properties.additionalName.title),1),t(w,{modelValue:o(s).additionalName,"onUpdate:modelValue":e[2]||(e[2]=r=>o(s).additionalName=r),placeholder:"Володимирівна",variant:"solo-inverted",name:"person.additionalName"},null,8,["modelValue"]),e[9]||(e[9]=u("p",{class:"text-subtitle-1 mb-6"},"Зазначте статус члена комісії",-1)),u("div",oe,V(o(k).properties.status.title),1),t(R,{modelValue:o(s).status,"onUpdate:modelValue":e[3]||(e[3]=r=>o(s).status=r),dictionary:"commissionMemberTypes"},null,8,["modelValue"]),t(J,{label:"Це мій власний запис",modelValue:o(c),"onUpdate:modelValue":e[4]||(e[4]=r=>N(c)?c.value=r:null)},null,8,["modelValue"])]),_:1}),t(z,null,{default:a(()=>[t(g,{onClick:e[5]||(e[5]=r=>f("cancel")),color:"grey-darken-1"},{default:a(()=>[...e[10]||(e[10]=[p("Скасувати",-1)])]),_:1}),t(g,{onClick:i,color:"primary-darken-1",variant:"flat"},{default:a(()=>[...e[11]||(e[11]=[p("Зберегти",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ie={class:"pa-4"},re={class:"text-no-wrap"},me=B({__name:"CommissionMembersList",setup(x){const l=M(),{commissionMembers:d,user:m}=K(l),{removeCommissionMember:C}=l,v=[{key:"name",title:"Прізвище, ім'я та по батькові"},{key:"status",title:"Статус"},{key:"isCurrentUser",title:"Поточний користувач",align:"center"},{key:"id",title:"Видалити"}],n=y(),s=()=>{n.value=W()},c=f=>{C(f)};return(f,i)=>{const _=ne;return b(),D("div",ie,[i[4]||(i[4]=u("h5",{class:"text-h5 mb-4"},"Склад комісії",-1)),t(te,{headers:v,items:o(d),"hide-actions":"",class:"elevation-1","item-key":"id","hide-default-footer":"","no-data-text":"Ви ще не додали жодного члена комісії"},{"item.status":a(({item:e})=>[t(A,{label:"",color:"primary-darken-2"},{default:a(()=>[p(V(e.status),1)]),_:2},1024)]),"item.name":a(({item:e})=>[u("span",re,V([e.familyName,e.givenName,e.additionalName].filter(Boolean).join(" ")),1)]),"item.isCurrentUser":a(({item:e})=>[e.id===o(m).id?(b(),T(q,{key:0},{default:a(()=>[...i[1]||(i[1]=[p("mdi-check",-1)])]),_:1})):O("",!0)]),"item.id":a(({item:e})=>[t(g,{onClick:R=>c(e.id),color:"error",variant:"tonal",size:"small"},{default:a(()=>[...i[2]||(i[2]=[p("Видалити",-1)])]),_:1},8,["onClick"])]),_:2},1032,["items"]),t(g,{onClick:s,color:"primary",class:"mt-6"},{default:a(()=>[...i[3]||(i[3]=[p("Додати",-1)])]),_:1}),t(_,{id:o(n),onCancel:i[0]||(i[0]=e=>n.value=void 0)},null,8,["id"])])}}}),de={class:"pa-4"},ue=B({__name:"CommissionForm",setup(x){const l=y({}),{commission:d}=M(),m=y(!1);P(()=>{l.value=L(d),Y(()=>{m.value=!1})}),ee(()=>l,()=>{m.value||(m.value=!0)},{deep:!0});const C=()=>{if(!l.value.admin4)return alert("Не визначено місцезнаходження комісії");if(!l.value.title)return alert("Не визначена назва комісії");if(!l.value.code)return alert("Не визначено код ЄДРПОУ комісії");d.value=l.value,m.value=!1};return(v,n)=>{const s=X,c=Z;return b(),D("div",de,[n[3]||(n[3]=u("h5",{class:"text-h5 mb-4"},"Основні дані про комісію",-1)),t(s,{modelValue:o(l),"onUpdate:modelValue":n[0]||(n[0]=f=>N(l)?l.value=f:null)},null,8,["modelValue"]),n[4]||(n[4]=u("h5",{class:"text-h5 mt-6 mb-4"},"Місцезнаходження",-1)),t(c,{modelValue:o(l),"onUpdate:modelValue":n[1]||(n[1]=f=>N(l)?l.value=f:null)},null,8,["modelValue"]),t(g,{onClick:C,class:"mt-4",color:"primary-darken-1",disabled:!o(m)},{default:a(()=>[...n[2]||(n[2]=[p("Завантажити",-1)])]),_:1},8,["disabled"])])}}}),fe={},pe={style:{height:"calc(100vh - 56px)"}};function ce(x,l){const d=ue,m=me;return b(),D("div",pe,[t(G,{class:"rounded-md pa-3 h-100"},{default:a(()=>[t(E,null,{default:a(()=>[t(j,{cols:"5",class:"d-flex h-100 pa-5"},{default:a(()=>[t($,{color:"main",class:"d-flex flex-column h-100 w-100"},{default:a(()=>[t(U,{class:"flex-grow-1 overflow-auto custom-scroll"},{default:a(()=>[t(I,{items:["Налаштування комісії"]},{divider:a(()=>[...l[0]||(l[0]=[p("|",-1)])]),_:1}),t(d)]),_:1})]),_:1})]),_:1}),t(j,{cols:"7",class:"d-flex h-100 pa-0"},{default:a(()=>[t($,{class:"d-flex flex-column h-100 w-100 bg-white",flat:""},{default:a(()=>[t(U,{class:"flex-grow-1 overflow-auto pa-5"},{default:a(()=>[t(m)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const ve=F(fe,[["render",ce]]),_e={};function Ve(x,l){const d=ve;return b(),T(d)}const ke=F(_e,[["render",Ve]]);export{ke as default};
